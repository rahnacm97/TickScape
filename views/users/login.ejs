<%- include("../../views/partials/user/header") %>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<style>
	.container {
    	padding-top: 0; 
	}

	.login_part {
    	margin-top: -70px; 
	}

	body {
        font-family: 'Arial', sans-serif;
        background-color: #f4f4f4;
    }
	.error-message {
        color: red;
        font-size: 0.75rem;
        display: none;
    }
	.btn-outline-google {
        border-color: #4285F4;
        color: #fafbfc;
        font-size: 14px;
        padding: 10px 20px;
        text-align: center;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 5px;
    }

    .btn-outline-google:hover {
        background-color: #4285F4;
        color: white;
        border-color: #4285F4;
    }

	.text-center {
    	text-align: center;
	}

	.lost-pass{
		color: blue;
	}
	.lost-pass:hover {
        color: rgb(7, 7, 105);
    }
	
	.btn_3 {
        background-color: #4285F4;
        color: white;
        padding: 15px 0;
        width: 100%;
        border-radius: 8px;
        border: none;
        font-size: 16px;
        font-weight: bold;
        transition: background-color 0.3s;
    }

    .btn_3:hover {
        background-color: #357AE8;
    }

    .social-btns a {
        text-decoration: none;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
    }
	
        .password-container .toggle-password {
            position: absolute;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 16px;
            color: #666;
        }
</style>

<main>
	<!-- Hero Area Start-->
	<!-- <div class="slider-area ">
		<div class="single-slider slider-height2 d-flex align-items-center">
			<div class="container">
				<div class="row">
					<div class="col-xl-12">
						<div class="hero-cap text-center">
							<h2>Login</h2>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> -->
	<!-- Hero Area End-->
	<!--================login_part Area =================-->
	<section class="login_part section_padding ">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 col-md-6">
					<div class="login_part_text text-center" style="background-color: bisque;">
						<div class="login_part_text_iner">
							<h2>New to our Shop?</h2>
							<p>We offer a wide range of Watches that cater to all your needs. Join us and experience 
								a seamless shopping journey with exclusive deals and a user-friendly interface.</p>
							<a href="signup" class="btn_3">Create an Account</a>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-md-6">
					<div class="login_part_form">
						<div class="login_part_form_iner">
							<h3>Welcome Back ! <br>
								Please Sign In</h3>
							<form id="login-form" class="row contact_form" action="#" method="post" novalidate="novalidate" autocomplete="off">
								<div class="col-md-12 form-group p_star">
									<input type="text" class="form-control" id="name" name="email" value=""
										placeholder="Email">
									<div id="error1" class="error-message"></div>
								</div>
								<div class="password-container col-md-12 form-group p_star">
									<input type="password" id="password" class="form-control" id="password" name="password" value="" placeholder="Password" autocomplete="off">
        							<i class="fas fa-eye-slash toggle-password" onclick="togglePassword()"></i>
									
										<div id="error2" class="error-message"></div>
								</div>
								<%if(locals.message && message.length>0){%>
									<div class="alert alert-danger text-center">
									  <%=message%>
									</div>
								<%}%>
					  
								<div class="col-md-12 form-group">
									<!-- <div class="creat_account d-flex align-items-center">
										<input type="checkbox" id="f-option" name="selector">
										<label for="f-option">Remember me</label>
									</div> -->
									<button type="submit" value="submit" class="btn_3">
										log in
									</button>
									<div class="mt-2px text-center">
                                        <p>Or</p>
                                    </div>
                                    <div class="social-btns">
                                        <a href="/auth/google" class="btn btn-outline-google btn-block">
                                            <img src="/assets/img/logo/googlesignup.png" alt="Google Logo" style="width: 24px; height: 24px; margin-right: 10px;" />
                                        	login with Google
                                        </a>
                                    </div>
									<br>	
									<a class="lost_pass" href="/forgot-password">Forgot password?</a>				  
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!--================login_part end =================-->
</main>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script>
    document.getElementById('login-form').addEventListener('submit', async function (e) {
        e.preventDefault();

        const email = document.getElementById('name').value;
        const password = document.getElementById('password').value;

        // Encrypt the password before sending it (so it's not plain text in network requests)
        const encryptedPassword = CryptoJS.AES.encrypt(password, "your-secret-key").toString();

        const response = await fetch('/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, password: encryptedPassword }),
        });

        const result = await response.json();
        if (result.success) {
            window.location.href = '/';
        } else {
            alert(result.message);
        }
    });
</script> -->

<script>
	    window.history.pushState(null, null, window.location.href);
        window.onpopstate = function() {
            window.history.go(1);  // Prevent going back
        };

        window.onbeforeunload = function() {
            window.history.pushState(null, null, window.location.href); 
        };
	function togglePassword() {
            var passwordField = document.getElementById("password");
            var icon = document.querySelector(".toggle-password");

            if (passwordField.type === "password") {
                passwordField.type = "text"; 
                icon.classList.remove("fa-eye-slash");
                icon.classList.add("fa-eye"); 
              } else {
                passwordField.type = "password"; 
                icon.classList.remove("fa-eye");
                icon.classList.add("fa-eye-slash"); 
              }
        }
		document.getElementById("login-form").autocomplete = "off";
</script>

<%- include("../../views/partials/user/footer") %>