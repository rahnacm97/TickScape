<%- include("../../views/partials/user/header") %>
<script
  src="https://kit.fontawesome.com/a076d05399.js"
  crossorigin="anonymous"
></script>
<style>
  .container {
    padding-top: 50px;
  }

  .login_part {
    margin-top: -90px;
  }

  
  .login_part_text img {
    width: 500px;
    margin-bottom: 20px;
  }

  .form-control {
    border-radius: 5px;
    border: 1px solid #ddd;
    padding: 12px;
    font-size: 14px;
    margin-bottom: 15px;
    width: 100%;
  }

  .form-control:focus {
    border-color: #007bff;
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
  }

  .error-message {
    color: red;
    font-size: 0.75rem;
    display: none;
    margin-top: 5px;
  }

  .btn_3 {
    background-color: #007bff;
    color: white;
    border: none;
    font-size: 16px;
    padding: 12px 20px;
    width: 100%;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }

  .btn_3:hover {
    background-color: #0056b3;
  }

  .btn-outline-google {
    border-color: #4285f4;
    color: #fafbfc;
    font-size: 14px;
    padding: 10px 20px;
    text-align: center;
    width: 100%;
    border-radius: 5px;
    margin-top: 10px;
    transition: background-color 0.3s ease;
  }

  .btn-outline-google:hover {
    background-color: #4285f4;
  }

  .social-btns img {
    width: 24px;
    height: 24px;
    margin-right: 10px;
  }

  .mt-2px {
    margin-top: 10px;
  }

  .text-center p {
    font-size: 16px;
    color: #777;
  }

  .lost_pass {
    display: block;
    text-align: center;
    font-size: 14px;
    margin-top: 15px;
    color: #007bff;
    text-decoration: none;
  }

  .lost_pass:hover {
    color: #0056b3;
  }

  .form-group {
    margin-bottom: 20px;
  }

  h3 {
    font-size: 24px;
    margin-bottom: 20px;
    color: #333;
    text-align: center;
  }

  .login_part {
    background-color: #f9f9f9;
    padding: 20px 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }
  .password-container .toggle-password {
    position: absolute;
    right: 30px;
    top: 40%;
    transform: translateY(-50%);
    cursor: pointer;
    font-size: 16px;
    color: #666;
  }
</style>

<main>
  <!--================login_part Area =================-->
  <section class="login_part section_padding">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-6 col-md-6">
          <div class="login_part_text text-center">
            <div class="login_part_text_iner">
              <img src="/assets/img/logo/tslogo2.png" alt="" />
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-6">
          <div class="login_part_form">
            <div class="login_part_form_iner">
              <h3>Register now</h3>
              <form
                id="signform"
                class="row contact_form"
                action="/signup"
                method="post"
                novalidate="novalidate"
                mb-1
              >
                <div class="col-md-12 form-group p_star">
                  <input
                    type="text"
                    class="form-control"
                    id="fname"
                    name="fname"
                    value=""
                    placeholder="First Name"
                  />
                  <div id="err1" class="error-message"></div>
                </div>

                <div class="col-md-12 form-group p_star">
                  <input
                    type="text"
                    class="form-control"
                    id="lname"
                    name="lname"
                    value=""
                    placeholder="Last Name"
                  />
                  <div id="err2" class="error-message"></div>
                </div>

                <div class="col-md-12 form-group p_star">
                  <input
                    type="text"
                    class="form-control"
                    id="phone"
                    name="phone"
                    value=""
                    placeholder="Phone Number"
                  />
                  <div id="err3" class="error-message"></div>
                </div>

                <div class="col-md-12 form-group p_star">
                  <input
                    type="text"
                    class="form-control"
                    id="email"
                    name="email"
                    value=""
                    placeholder="Email"
                  />
                  <div id="err4" class="error-message"></div>
                </div>

                <div class="password-container col-md-12 form-group p_star">
                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    name="password"
                    value=""
                    placeholder="Password"
                  />
                  <i
                    class="fas fa-eye-slash toggle-password"
                    onclick="togglePassword()"
                  ></i>
                  <div id="err5" class="error-message"></div>
                </div>

                <div class="password-container col-md-12 form-group p_star">
                  <input
                    type="password"
                    class="form-control"
                    id="cpassword"
                    name="cpassword"
                    value=""
                    placeholder="Confirm Password"
                  />
                  <div id="err6" class="error-message"></div>
                </div>

                <div class="col-md-12 form-group p_star">
                  <input
                    type="text"
                    class="form-control"
                    id="referralCode"
                    name="referralCode"
                    value=""
                    placeholder="Referral Code (Optional)"
                  />
                  <div id="err7" class="error-message"></div>
                </div>

                <%if(locals.message && message.length>0){%>
                <div class="alert alert-danger text-center"><%= message %></div>
                <%}%>

                <div class="col-md-12 form-group">
                  <button type="submit" value="submit" class="btn_3">
                    SIGN UP
                  </button>
                  <div class="mt-2px text-center">
                    <p>Or</p>
                  </div>
                  <div class="social-btns">
                    <a
                      href="/auth/google"
                      class="btn btn-outline-google btn-block"
                    >
                      <img
                        src="/assets/img/logo/googlesignup.png"
                        alt="Google Logo"
                        style="width: 24px; height: 24px; margin-right: 10px"
                      />
                      Sign Up Using Google
                    </a>
                  </div>
                  <br />
                  <a class="lost_pass" href="/login"
                    >Already Registered? Login</a
                  >
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================login_part end =================-->
</main>

<%- include("../../views/partials/user/footer") %>

<script>
  const fnameid = document.getElementById("fname");
  const lnameid = document.getElementById("lname");
  const phoneid = document.getElementById("phone");
  const emailid = document.getElementById("email");
  const passwordid = document.getElementById("password");
  const cpasswordid = document.getElementById("cpassword");
  const err1id = document.getElementById("err1");
  const err2id = document.getElementById("err2");
  const err3id = document.getElementById("err3");
  const err4id = document.getElementById("err4");
  const err5id = document.getElementById("err5");
  const err6id = document.getElementById("err6");
  const signformid = document.getElementById("signform");

  function fnameValidate(e) {
    const fnameval = fnameid.value;
    const fnamepattern = /^[A-Za-z\s]+$/;

    if (fnameval.trim() === "") {
      err1id.style.display = "block";
      err1id.innerHTML = "Please Enter a valid Name";
    } else if (!fnamepattern.test(fnameval)) {
      err1id.style.display = "block";
      err1id.innerHTML = "Name can only contain Alphabets and Spaces";
    } else {
      err1id.style.display = "none";
      err1id.innerHTML = "";
    }
  }

  function lnameValidate(e) {
    const lnameval = lnameid.value;
    const lnamepattern = /^[A-Za-z\s]+$/;

    if (lnameval.trim() === "") {
      err2id.style.display = "block";
      err2id.innerHTML = "Please Enter a valid last name";
    } else if (!lnamepattern.test(lnameval)) {
      err2id.style.display = "block";
      err2id.innerHTML = "Name can only contain Alphabets and Spaces";
    } else {
      err2id.style.display = "none";
      err2id.innerHTML = "";
    }
  }

  function phoneValidate(e) {
    const phoneval = phoneid.value;
    const phonepattern = /^[A-Za-z\s]+$/;

    if (phoneval.trim() === "") {
      err3id.style.display = "block";
      err3id.innerHTML = "Enter Valid Phone Number";
    } else if (phoneval.length < 10 || phoneval.length > 10) {
      err3id.style.display = "block";
      err3id.innerHTML = "Enter 10 digit Number";
    } else {
      err3id.style.display = "none";
      err3id.innerHTML = "";
    }
  }

  function emailValidate(e) {
    const emailval = emailid.value;
    const emailpattern =
      /^([a-zA-Z0-9._-]+)@([a-zA-Z0-9.-]+)\.([a-zA-Z]{2,4})$/;

    if (!emailpattern.test(emailval)) {
      err4id.style.display = "block";
      err4id.innerHTML = "Invalid Format";
    } else {
      err4id.style.display = "none";
      err4id.innerHTML = "";
    }
  }

  function passwordValidate(e) {
    const passval = passwordid.value;
    const cpassval = cpasswordid.value;
    const alpha = /[a-zA-Z]/;
    const digit = /\d/;

    if (passval.length < 8) {
      err5id.style.display = "block";
      err5id.innerHTML = "Should contain atleast 8 characters";
    } else if (!alpha.test(passval) || !digit.test(passval)) {
      err5id.style.display = "block";
      err5id.innerHTML = "Should contain Digits and Alphabets";
    } else {
      err5id.style.display = "none";
      err5id.innerHTML = "";
    }

    if (passval !== cpassval) {
      err6id.style.display = "block";
      err6id.innerHTML = "Password do not Match";
    } else {
      err6id.style.display = "none";
      err6id.innerHTML = "";
    }
  }

  function referralCodeValidate(e) {
    const referralVal = referralCodeid.value.trim();
    const err7id = document.getElementById("err7");

    if (referralVal === "") {
        err7id.style.display = "none";
        err7id.innerHTML = "";
        return; 
    }
}

  document.addEventListener("DOMContentLoaded", () => {
	const referralCodeid = document.getElementById("referralCode");

    signformid.addEventListener("submit", function (e) {
	  
      fnameValidate();
      lnameValidate();
      phoneValidate();
      emailValidate();
      passwordValidate();
	  referralCodeValidate();

      if (
        !fnameid ||
        !lnameid ||
        !phoneid ||
        !emailid ||
        !passwordid ||
        !cpasswordid ||
        !err1id ||
        !err2id ||
        !err3id ||
        !err4id ||
        !err5id ||
        !err6id ||
		!err7id ||
        !signformid
      ) {
        console.error("One or more fields are empty");
      }
      if (
        err1.innerHTML ||
        err2.innerHTML ||
        err3.innerHTML ||
        err4.innerHTML ||
        err5.innerHTML ||
        err6.innerHTML ||
		err7.innerHTML
      ) {
        e.preventDefault();
      }
    });
  });

  function togglePassword() {
    var passwordField = document.getElementById("password");
    var icon = document.querySelector(".toggle-password");

    if (passwordField.type === "password") {
      passwordField.type = "text";
      icon.classList.remove("fa-eye-slash");
      icon.classList.add("fa-eye");
    } else {
      passwordField.type = "password";
      icon.classList.remove("fa-eye");
      icon.classList.add("fa-eye-slash");
    }
  }
</script>
