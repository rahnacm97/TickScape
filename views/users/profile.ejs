<%- include("../../views/partials/user/header") %>
<style>

  /* General Styles */
  body {
    font-family: 'Arial', sans-serif;
    background-color: #f8f9fa;
    margin: 0;
    padding: 0;
  }

  .main {
    padding: 20px 0;
  }

  .card {
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    background-color: #ffffff;
  }

  .card-header {
    background-color: #37438b;
    color: #fff;
    font-size: 18px;
    font-weight: bold;
    border-radius: 10px 10px 0 0;
    padding: 15px;
    text-align: center;
  }

  .card-body {
  padding: 20px;
  line-height: 2;
}

  .btn {
    border-radius: 5px;
    transition: background-color 0.3s, transform 0.2s;
    margin-top: 10px;
  }

  .btn-success {
    background-color: #2657a0;
    color: #fff;
    border: none;
    margin-left: 20px;
  }

  .btn-success:hover {
    background-color: #19377e;
    transform: scale(1.05);
  }

  .btn-small {
    font-size: 14px;
    padding: 5px 10px;
    border-radius: 5px;
    background-color: #5c6bc0;
    color: #fff;
    text-decoration: none;
    border: none;
    transition: background-color 0.3s ease;
  }

  .btn-small:hover {
    background-color: #3f51b5;
  }

  .dashboard-menu {
    background-color: #f0f3f3;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .dashboard-menu .nav-link {
    font-size: 16px;
    font-weight: bold;
    color: #3e53ca;
    padding: 10px;
    margin-bottom: 5px;
    border-radius: 5px;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .dashboard-menu .nav-link.active {
    background-color: #5b6dd5;
    color: #fff;
  }

  .dashboard-menu .nav-link:hover {
    background-color: #2b41be;
    color: #fff;
  }

  .page-header.breadcrumb-wrap {
    margin-top: 10px;
    background-color: #ede9ec;
    padding: 10px 0;
}

.breadcrumb-wrap {
    padding: 15px 0;
    background-color: #1e918b;
    color: #fff;
}

.breadcrumb a {
    color: #088178;
    text-decoration: none;
}

.breadcrumb span {
    margin: 0 5px;
    color: rgb(125, 124, 124);
}

  /* Responsive Styles */
  @media (max-width: 768px) {
    .dashboard-menu {
      padding: 10px;
    }

    .dashboard-menu .nav-link {
      font-size: 14px;
    }

    .card-header {
      font-size: 16px;
    }

    .btn-small {
      font-size: 12px;
    }
  }

  .tab-pane{
    padding: 20px;
    
  }

  .card{
    border: 1px solid #dee2e6;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    background-color: #ffffff;
    margin-bottom: 20px;
    transition: transform 0.2s ease-in-out;
  }

  .card:hover {
    transform: scale(1.02);
  }

  .card-header {
    background-color: #007bff;
    color: #ffffff;
    font-weight: bold;
    padding: 15px;
    border-radius: 10px 10px 0 0;
    text-align: center;
  }

  .card-body {
    padding: 20px;
    line-height: 1.6; /* Adds line spacing for better readability */
  }

  address {
    font-style: normal;
    margin-bottom: 15px;
    color: #120d0d;
  }

  .card-body p {
    margin: 5px 0;
  }
  .btn-small1{
    display: block; 
    width: fit-content; 
    margin-left: auto;
    margin-right: auto;
    font-size: 14px;
    padding: 8px 12px;
    border-radius: 5px;
    color: #ffffff;
    text-decoration: none;
    transition: background-color 0.3s ease, transform 0.2s ease-in-out;
    display: inline-block;
    background-color: #007bff;
  }
  .btn-small1:hover {
    transform: scale(1.05);
    color: white;
    background-color: #17406c;
  }

  .btn-small {
    font-size: 14px;
    padding: 8px 12px;
    border-radius: 5px;
    color: #ffffff;
    text-decoration: none;
    transition: background-color 0.3s ease, transform 0.2s ease-in-out;
    display: inline-block;
  }

  .btn-small:hover {
    transform: scale(1.05);
    color: white;
  }

  .btn-small:first-child {
    background-color: #007bff;
  }

  .btn-small:first-child:hover {
    background-color: #0056b3;
  }

  .btn-small:last-child {
    background-color: #dc3545;
  }

  .btn-small:last-child:hover {
    background-color: #c82333;
  }

  .btn-primary {
    background-color: #136d28;
    border: none;
    color: #ffffff;
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bold;
    text-align: center;
    border-radius: 5px;
    cursor: pointer;
    display: inline-block;
    margin-top: 20px;
    transition: background-color 0.3s ease-in-out;
  }

  .btn-primary:hover {
    background-color: #0a4817;
  }

  .d-flex {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
  }

</style>


<main class="main">
 <div class="page-header breadcrumb-wrap mb-3">
   <div class="container">
     <div class="breadcrumb">
       <a href="/" rel="nofollow">Home</a>
       <span></span> Profile 
     </div>
   </div>
 </div>
  <section class="pt-10 pb-10">
   <div class="container">
     <div class="row">
       <div class="col-lg-12 m-auto">
         <div class="row">
           <div class="col-md-4">
             <div class="dashboard-menu ms-1">
               <ul class="nav flex-column" role="tablist">
                 <li class="nav-item">
                   <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" href="#dashboard" role="tab" aria-controls="dashboard" aria-selected="false">
                     <i class="fi-rs-settings-sliders mr-10"></i>Dashboard
                   </a>
                 </li>
                 <li class="nav-item">
                   <a class="nav-link" id="address-tab" data-bs-toggle="tab" href="#address" role="tab" aria-controls="address" aria-selected="true">
                     <i class="fi-rs-marker mr-10"></i>My Address
                   </a>
                 </li>
                 <li class="nav-item">
                   <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab" aria-controls="orders" aria-selected="false">
                     <i class="fi-rs-shopping-bag mr-10"></i>Orders
                   </a>
                 </li>
                 <li class="nav-item">
                   <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab" href="#track-orders" role="tab" aria-controls="track-orders" aria-selected="false">
                     <i class="fi-rs-shopping-cart-check mr-10"></i>Wallet Status
                   </a>
                 </li>
                 <li class="nav-item">
                   <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab" href="#wallet-history" role="tab" aria-controls="track-orders" aria-selected="false">
                     <i class="fi-rs-shopping-cart-check mr-10"></i>Wallet History
                   </a>
                 </li>
                 <li class="nav-item">
                   <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab" href="#referal" role="tab" aria-controls="track-orders" aria-selected="false">
                     <i class="fi-rs-shopping-cart-check mr-10"></i>Referals
                   </a>
                 </li>
                 <li class="nav-item">
                   <a class="nav-link" href="/logout">
                     <i class="fi-rs-sign-out mr-10"></i>Logout
                   </a>
                 </li>
               </ul>
             </div>
           </div>
           <div class="col-md-8">
             <div class="tab-content dashboard-content">


               <div class="tab-pane fade show active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                 <div class="card card-green">
                   <div class="card-header">
                     <h5 class="mb-0 text-center">My Profile</h5>
                   </div>
                   <div class="card-body text-center">
                     <h5 class="card-title"><%=user.fname%> <%=user.lname%></h5>
                     <p class="card-text">
                       <strong>Phone: </strong><%=user.phone%>
                     </p>
                     <p class="card-text">
                       <strong>Email: </strong><%=user.email%>
                     </p>
                     <a href="/change-email" class="btn btn-sm btn-success ml-2">Change Email</a>
                     <a href="/change-password" class="btn btn-sm btn-success">Change Password</a>
                   </div>
                 </div>
               </div>


               <div
                 class="tab-pane fade"
                 id="address"
                 role="tabpanel"
                 aria-labelledby="address-tab"
               >
                 <div class="row">
                  <%if(userAddress){%>
                    <%userAddress.address.forEach((address) => {%>
                   <div class="col-lg-6">
                     <div class="card address mb-3 mb-lg-6">
                       <div class="card-header">
                         <h5 class="mb-0"><%= address.addressType %></h5>
                       </div>
                       <div class="card-body">
                         <address>
                          Name: <%= address.name %> <br/>
                          City: <%= address.city %> <br>
                          Landmark: <%= address.landMark %> <br>
                          State: <%= address.state %> <br>
                        </address>
                         Pincode: <p><%= address.pincode %></p>
                         Phone No: <p><%= address.phone %></p>
                         Alternate Phone No: <p><%= address.altPhone %></p>
                      
                         <div class="d-flex justify-content-between">
                           <a href="/editAddress?id=<%= address._id%>" class="btn-small">Edit</a>
                           <a href="/deleteAddress?id=<%= address._id%>" class="btn-small" onclick="return confirm('Do you want to delete this address?')">Delete</a>
                         </div>
                        
                       </div>
                     </div>
                   </div>
                   <%})%><%} else {%>
                   <div class="col-lg-6">
                     <div class="card mb-3 mb-lg-0">
                       <div class="card-header">
                         <h5 class="mb-0"></h5>
                       </div>
                       <div class="card-body">
                         <address>No address</address>
                       </div>
                     </div>
                   </div>
                   <%}%>
                   <div>
                     <a href="/addAddress">
                       <button class="btn btn-primary w-70">
                         Add address
                       </button>
                     </a>
                   </div>
                 </div>
               </div>


               <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab" style="width: 800px;">
                 <div class="card">
                   <div class="card-header">
                     <h5 class="mb-0">My Orders</h5>
                   </div>
                   <div class="card-body">
                     <div class="table-responsive">
                       <table class="table">
                         <thead>
                           <tr>
                             <th>Sl. No</th>
                             <th>Product Details</th>
                             <th>Status</th>
                             <th>Total</th>
                             <th>Date

                             </th>
                             <th>Actions</th>
                           </tr>
                         </thead>
                         <tbody>
                          <% if (orders.length > 0) { %>
                            <% orders.forEach((order, index) => { %>
                                <tr>
                                    <td><%= index + 1 %></td>
                                    <td>
                                        <ul>
                                            <% if (order.productId) { %>  <!-- Check if productId exists -->
                                                <li>
                                                    Product Name: <%= order.productId.productName %> <br> 
                                                    Quantity: <%= order.quantity %> <br>
                                                    Price: $<%= (order.quantity * order.price).toFixed(2) %>
                                                </li>
                                            <% } else { %>
                                                <li>Product details not available</li>
                                            <% } %>
                                        </ul>
                                    </td>
                                    <td><%= order.status %></td>
                                    <td>$<%= order.finalAmount.toFixed(2) %></td>
                                    <td>
                                      <%= new Date(order.invoiceDate).toLocaleDateString('en-IN', {
                                         weekday: 'short', 
                                         month: 'short', 
                                         day: 'numeric', 
                                         year: 'numeric'
                                      }) %>
                                   </td>
                                    <td>
                                      <a href="/viewOrder" class="btn-small1 d-block">View</a>
                                    </td>       
                                </tr>
                            <% }) %>
                        <% } else { %>
                            <tr>
                                <td colspan="4">No orders found.</td>
                            </tr>
                        <% } %>
                                                
                        </tbody>                                                
                       </table>
                     </div>
                   </div>
                 </div>
               </div>


               <div class="tab-pane fade" id="track-orders" role="tabpanel" aria-labelledby="track-orders-tab">
                 <div class="card">
                   <div class="card-header">
                     <h5 class="mb-0">Wallet</h5>
                   </div>
                   <div class="card-body contact-from-area">
                     <div class="row">
                       <div class="col-lg-8 mx-auto text-center mt-90">
                         <form>
                           <div class="form-group">
                             <label for="walletAmount" class="h4">Amount</label>
                             <div class="h3"></div>
                           </div>
                           <button type="button" class="btn btn-success" onclick="">Add Money</button>
                         </form>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>


               <div class="tab-pane fade" id="wallet-history" role="tabpanel" aria-labelledby="orders-tab">
                 <div class="card">
                   <div class="card-header">
                     <h5 class="mb-0">Wallet History</h5>
                   </div>
                   <div class="card-body">
                     <div class="table-responsive">
                       <table class="table">
                         <thead>
                           <tr>
                             <th>Date</th>
                             <th>Status</th>
                             <th>Amount</th>
                           </tr>
                         </thead>
                         <tbody>
                           <tr>
                             <td></td>
                             <td></td>
                             <td></td>
                           </tr>
                         </tbody>
                       </table>
                     </div>
                   </div>
                 </div>
               </div>


               <div class="tab-pane fade" id="referal" role="tabpanel" aria-labelledby="track-orders-tab">
                 <div class="card">
                   <div class="card-header">
                     <h5 class="mb-0">Referal</h5>
                   </div>
                   <div class="card-body">
                     <h6 class="mb-3">Refer your friends and earn money!</h6>
                     <p>Share this link: <strong>></strong></p>
                     <p>Earned: ₹</p>
                   </div>
                 </div>
               </div>
       </div>
     </div>
   </div>
 </section>
</main>
<%- include("../../views/partials/user/footer") %>
